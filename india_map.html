<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0"> 

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>


        <!-- map -->
        <script src="https://code.highcharts.com/maps/highmaps.js"></script>
        <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
        <script src="https://code.highcharts.com/mapdata/countries/in/in-all.js"></script>
        


        <title>INDIA MAP</title>
        <link rel="stylesheet" href="india_map.css">

    </head>
    <body>
        <header><h1>COVID-19 INDIA TRACKER</h1></header>
        <section class="section1">
            <h2 >STATEWISE CASE COUNT</h2>
                <div class="responsiveTable" style="padding-left: 100px;">
                        <table class="table table-dark table-striped table-bordered text-center table-md" id="myTable">
                            <tr>
                                    <th>Last Updated</th>
                                    <th >State/UT</th>
                                    <th>Confirmed</th>
                                    <th>Active</th>
                                    <th>Recovered</th>
                                    <th>Deaths</th>
                                    

                                    <th>Helpline Number</th>
                            </tr>
                
                        </table>
                    </div>


                    <script>

                            async function getCovidAPI()
                            {
                                const jsondata=await fetch('https://api.covid19india.org/data.json');
                
                                //console.log(jsondata);
                
                                const jsdata=await jsondata.json();
                                //console.log(jsdata);
                                var helpline=[0,02026127394,04429510500,01122307145,104,01412225624,104,18001805145,1800313444222,102,104,08662410978,104,104,104,104,9439994859,8558893911,04712552056,6913347770,104,104,104,104,9779558282,03812315879,01982256462,104,3852411668,03812315879,7005539653
,03192232102,108,9436055743,104,102,104,104];
                                for(var i=0;i<helpline.length;i++)
                                {
                                    console.log(helpline[i]);
                                }
                                for(var i=1;i<jsdata.statewise.length;i++)
                                {
                
                                    /*fetching latest time record*/
                                     const country_updated_time=jsdata.statewise[i].lastupdatedtime;
                                     /*fetching states*/
                                    const country_res=jsdata.statewise[i].state;
                                    /*fetching total confirmed cases of particular state*/
                                    const country_confirmed=jsdata.statewise[i].confirmed;
                                    /*fetching total active cases of particular state*/
                                    const country_active=jsdata.statewise[i].active;
                                    /*fetching total recovered cases of a particular state*/
                                    const country_recovered=jsdata.statewise[i].recovered;
                                    /*fetching total deaths of a particular state*/
                                    const country_death=jsdata.statewise[i].deaths;
                
                                    const helpline_num=helpline[i];
                                    
                                    var table=document.getElementById('myTable');
                                    var row=table.insertRow(i);
                                    var cell0=row.insertCell(0);
                                    var cell1=row.insertCell(1);
                                    var cell2=row.insertCell(2);
                                    var cell3=row.insertCell(3);
                                    var cell4=row.insertCell(4);
                                    var cell5=row.insertCell(5);
                                    var cell6=row.insertCell(6);
                                    cell0.innerHTML=country_updated_time;
                                    cell1.innerHTML=country_res;
                                    cell2.innerHTML=country_confirmed;
                                    cell3.innerHTML=country_active;
                                    cell4.innerHTML=country_recovered;
                                    cell5.innerHTML=country_death;
                                    cell6.innerHTML=helpline_num;
                                    
                
                
                
                
                               
                                }
                            }
                            getCovidAPI();

</script>
        </section>
        <section class="section2">
            <h2>INDIA MAP</h2>
            <div id="container" class="div1"></div>

            <script>
          var obj = new Object();
          fetch('https://api.covid19india.org/data.json').then((response)=>
          {
             // console.log(response);
              return response.json();
          
          }).then((data)=>
          {
              console.log(data.statewise);
              var total = data.statewise;
              
              for(var i=0;i<total.length;i++)
              {
                  if(total[i].state == 'West Bengal')
                      obj[2] = total[i].confirmed;
          
                  if(total[i].state == 'Maharashtra')
                      obj[25] = total[i].confirmed;
          
                  if(total[i].state == 'Punjab')
                      obj[29] = total[i].confirmed;
          
                  if(total[i].state == 'Rajasthan')
                      obj[30] = total[i].confirmed;
          
                  if(total[i].state == 'Madhya Pradesh')
                      obj[8] = total[i].confirmed;
          
                  if(total[i].state == 'Gujarat')
                      obj[9] = total[i].confirmed;
          
                   if(total[i].state == 'Tamil Nadu')
                      obj[7] = total[i].confirmed;
          
                   if(total[i].state == 'Uttar Pradesh')
                      obj[31] = total[i].confirmed;
          
                   if(total[i].state == 'Andhra Pradesh')
                      obj[27] = total[i].confirmed;
          
                  if(total[i].state == 'Kerala')
                      obj[22] = total[i].confirmed;
          
                  if(total[i].state == 'Karnataka')
                      obj[23] = total[i].confirmed;
          
                  if(total[i].state == 'Haryana')
                      obj[18] = total[i].confirmed;
          
                   if(total[i].state == 'Odisha')
                      obj[3] = total[i].confirmed;
          
                   if(total[i].state == 'Himachal Pradesh')
                      obj[20] = total[i].confirmed;
          
                   if(total[i].state == 'Bihar')
                      obj[4] = total[i].confirmed;
          
          
                    if(total[i].state == 'Bihar')
                      obj[4] = total[i].confirmed;
                    
                     if(total[i].state == 'Jammu and Kashmir')
                      obj[21] = total[i].confirmed; 
          
                    if(total[i].state == 'Chhattisgarh')
                      obj[6] = total[i].confirmed; 
          
          
                    if(total[i].state == 'Assam')
                      obj[26] = total[i].confirmed; 
          
          
                    if(total[i].state == 'Goa')
                      obj[10] = total[i].confirmed; 
                     
                     if(total[i].state == 'Mizoram')
                     obj[14] = total[i].confirmed;  
          
                      if(total[i].state == 'Arunachal Pradesh')
                     obj[13] = total[i].confirmed;  
          
          
                      if(total[i].state == 'Nagaland')
                     obj[11] = total[i].confirmed;  
          
                       if(total[i].state == 'Sikkim')
                     obj[5] = total[i].confirmed; 
          
                    if(total[i].state == 'Manipur')
                     obj[12] = total[i].confirmed;
          
                      if(total[i].state == 'Meghalaya')
                     obj[28] = total[i].confirmed;
          
                    if(total[i].state == 'Tripura')
                     obj[15] = total[i].confirmed;
          
                     if(total[i].state == 'Jharkhand')
                     obj[33] = total[i].confirmed;
          
                    
                    
                    
          
          
          
                      
            
           
           
           
           
           
          
           
           
           
           
           
           
           
           
           
           
              }
              fetchMap();
          }).catch((error)=>
          {
                 console.log(error);
          });
          
          
          
          function fetchMap() {
                  
          var data = [
              ['in-py', 0],
              ['in-ld', 1],
              ['in-wb', obj[2]],
              ['in-or', obj[3]],
              ['in-br', obj[4]],
              ['in-sk', obj[5]],
              ['in-ct', obj[6]],
              ['in-tn', obj[7]],
              ['in-mp', obj[8]],
              ['in-2984',obj[9]],
              ['in-ga', obj[10]],
              ['in-nl', obj[11]],
              ['in-mn', obj[12]],
              ['in-ar', obj[13]],
              ['in-mz', obj[14]],
              ['in-tr', obj[15]],
              ['in-3464', 16],
              ['in-dl', 17],
              ['in-hr', obj[18]],
              ['in-ch', 19],
              ['in-hp', obj[20]],
              ['in-jk', obj[21]],
              ['in-kl', obj[22]],
              ['in-ka', obj[23]],
              ['in-dn', 24],
              ['in-mh', obj[25]],
              ['in-as', obj[26]],
              ['in-ap', obj[27]],
              ['in-ml', obj[28]],
              ['in-pb', obj[29]],
              ['in-rj', obj[30]],
              ['in-up', obj[31]],
              ['in-ut', 32],
              ['in-jh', obj[33]]
          ];
          
          
          // Create the chart
          Highcharts.mapChart('container', {
              chart: {
                  map: 'countries/in/in-all'
              },
          
              title: {
                  text: 'Confirmed Cases In States'
              },
          
              subtitle: {
                  text: 'Source map: <a href="http://code.highcharts.com/mapdata/countries/in/in-all.js">India</a>'
              },
          
              mapNavigation: {
                  enabled: true,
                  buttonOptions: {
                      verticalAlign: 'bottom'
                  }
              },
          
              colorAxis: {
                  min: 0
              },
          
              series: [{
                  data: data,
          
                  name: 'Confirmed Cases',
                  states: {
                      hover: {
                          color: '#19B8FC'
                      }
                  },
                  dataLabels: {
                     // enabled: true,
                     // format: '{point.name}'
                  }
              }]
          });
          
          }
          
          
          
            </script>
        </section>
        </body>
        </html>